---
const navItems = [
  { label: 'OSAN GAMES', href: '/labs' },
  { label: 'Modules', href: '/visual-classes' },
  { label: 'Workshops', href: '/workshops' },
  { label: 'Contribute', href: '/join' },
  { label: 'Resume', href: '/resume' },
];
const ctaHref = 'https://calendly.com/abellou/30min';
const currentPath = Astro.url.pathname.replace(/\/$/, '') || '/';
---
<header class="site-header">
  <div class="container header-inner">
    <a class="brand brand-lockup" href="/" aria-label="OSAN home">
      <img
        class="brand-lockup-image"
        src="/icons/osan-logo-v2.png"
        srcset="/icons/osan-logo-v2.png 1x, /icons/osan-logo-v2@2x.png 2x"
        sizes="(max-width: 760px) 8.6rem, 11rem"
        alt="OSAN"
        loading="eager"
        decoding="async"
        fetchpriority="high"
        onerror="if (this.dataset.logoFallback) { return; } this.dataset.logoFallback='1'; this.classList.add('brand-lockup-image--fallback'); this.src='/icons/oscar-cog-brain.svg'; this.onerror=null;"
      />
    </a>
    <div class="header-right">
      <nav class="site-nav" aria-label="Primary">
        {navItems.map((item) => {
          const isCurrent = item.href === '/'
            ? currentPath === '/'
            : currentPath.startsWith(item.href);
          return (
            <a href={item.href} class="nav-link" aria-current={isCurrent ? 'page' : undefined}>
              {item.label}
            </a>
          );
        })}
      </nav>
      <a
        class="button button--primary nav-cta"
        href={ctaHref}
        target="_blank"
        rel="noopener noreferrer"
      >
        Book
      </a>
    </div>
  </div>
</header>
