---
import BaseLayout from '../layouts/BaseLayout.astro';
import { loadGames } from '../lib/content';
import Card from '../components/Card.astro';
import CardGrid from '../components/CardGrid.astro';
import TagList from '../components/TagList.astro';
import Badge from '../components/Badge.astro';

const games = await loadGames();
---
<BaseLayout title="Labs - Oscar Sanchez" description="Playable demos and game-based AI workshops">
  <section class="hero-shell scene-shell scene-accent command-shell" style="--scene-accent: var(--cog-pink);">
    <p class="hero-eyebrow">Playable AI artifacts</p>
    <h1>Labs</h1>
    <p class="text-small deck-subtitle">Playable demos for fast execution and teaching loops.</p>
  </section>

  <CardGrid gap="var(--space-3)" align="start">
    {games.map((game, index) => (
      <Card>
        <article
          class="catalog-item cog-entrance"
          style={`--reveal-delay:${index * 45}ms; --catalog-accent: var(--cog-pink);`}
        >
          <div class="catalog-card-stack">
            {index === 0 ? <Badge label="Playable" /> : null}
            <h2>{game.title}</h2>
            <p class="catalog-summary">{game.tagline}</p>
            <TagList tags={game.concepts} compact maxItems={3} />
            <div class="catalog-actions">
              <a class="button" href={`/labs/${game.id}`}>Details</a>
              <a class="button button--primary" href={game.deployUrl} target="_blank" rel="noopener noreferrer">Play</a>
              {game.repoUrl ? (
                <a class="button" href={game.repoUrl} target="_blank" rel="noopener noreferrer">Repo</a>
              ) : (
                <span class="text-small">Repo not yet added</span>
              )}
            </div>
          </div>
        </article>
      </Card>
    ))}
  </CardGrid>
</BaseLayout>
